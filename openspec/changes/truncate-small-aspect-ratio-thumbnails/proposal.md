# Proposal: Truncate Small Aspect Ratio Thumbnails

## Summary

当图片宽高比过小时（如竖版图片或全景图片的局部），其在瀑布流布局中会占用过多的纵向空间，导致用户体验下降。本提案旨在实现以下功能：

1. **自动截断**：当图片宽高比小于阈值时，在瀑布流中显示截断后的缩略图
2. **视觉提示**：被截断的图片需要有明确的视觉标识，告知用户这是一张被截断的缩略图

## Problem Statement

当前瀑布流布局使用简单的列分配算法，将图片依次分配到各列。当遇到竖版图片（高 > 宽）时，该图片会在纵向占用大量空间，导致：

- 页面出现大量空白区域
- 用户需要频繁滚动才能浏览完所有内容
- 浏览效率降低

## Proposed Solution

### 方案概述

在 `MediaCard` 组件中实现以下逻辑：

1. **宽高比检测**：根据图片的原始宽高信息计算宽高比
2. **截断阈值**：设置宽高比阈值（建议 0.5，即高度是宽度的2倍以上时）
3. **截断显示**：使用 CSS `object-fit` 和容器高度限制实现视觉截断
4. **视觉提示**：添加截断标识（如渐变消失效果 + 图标）

### 预期效果

- 宽高比 < 0.5 的图片在瀑布流中显示高度受限
- 图片底部显示渐变消失效果
- 右上角显示"截断"图标提示

## Impact Analysis

### 受影响组件

- `Gallery.vue` - 可能需要传递宽高比信息
- `MediaCard.vue` - 主要实现逻辑
- `types/index.ts` - 可能需要扩展 MediaFile 类型

### 兼容性

- 不影响现有图片的正常显示
- 向后兼容

## Success Criteria

1. 宽高比 < 0.5 的图片在瀑布流中纵向高度受限（最大高度为宽度的 1.5 倍）
2. 被截断的图片有明显视觉提示（渐变 + 图标）
3. 不影响正常比例图片的显示
4. 移动端和桌面端均有良好体验
